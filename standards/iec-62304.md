# IEC 62304

* Software can contribute to a hazardous situation
* Software can be used to control risk

* Software must be developed under a quality management system, and a risk management system
* Maintenance is as important as development

* Three major principles to promote safety in health software
  * Risk management
    * See ISO 14971, ISO 31000
  * Quality management
    * Disciplined and effective set of defined processes
    * See ISO 9001, ISO 13485, ISO
  * Software engineering

* In scope
  * Software risk management
  * Software configuration management
  * Software problem resolution
* Not in scope
  * System requirements process
  * Validation of software
  * Releasing software
  * Names, format and content of documentation
  

  
## Lingo
### Process
* Documentation is evidence of a controlled process
  * Process is a set of activities, activities are a set of tasks
  * Input to a process is typically the output of another
  * Waterfall model somewhat implied but is not prescribed
  * Outputs must be maintained in a consistent state, downstream processes must be updated promptly if an output has changed
  * All outputs and dependencies should be determined to be consistent before release
### Software
* Software composed of a system, items and units
  * A software unit is a software item that cannot be further divided
  * A software item is "any identifiable part of a computer program"
  * The granularity of this is up to the manufacturer
* SOUP
  * Software of unknown provenance
* Maintenance
  * modification of software after release for intended use
  * includes processes to act on problem reports
  * Categorised as:
    * corrective (fixes)
    * adaptive (new hardware, OS etc)
    * perfective (new requirements)
    * preventative (make maintenance easier)
* Release
  * a version of a configuration item, made available for a specific purpose
  * a configuration item is an entity that can be uniquely identified at a point in time  

## Versioning
* Any new version requires a software configuration management process





## Software development plan
* May explicitly define or make reference to the chosen software development life cycle model
* No model is implied, tasks can; overlap, iteract, be performed iteratively or recursively
  * See ISO 12207 for example models (waterfall, incremental, evolutionary)
  * A software item could be spec'd, implemented and verified before the overall architecture has been finalised
* Must address:
  * Processes
    * Can identify different activities for tasks based on classification
    * Standards, methods and tools associated with development (C)
    * Integration testing (B,C)
  * Deliverables
    * What artifacts and documentation are produced by activities and tasks
    * What deliverables require verification, what is the acceptance criteria
  * Traceability 
  * Configuration and change management
    * SOUP configuration items
    * Software to support development
    * When should change control be used, and what is the process
      * Includes compiler versions, Make files, environment settings
  * Problem resolution
    * Activities and deliverables for handling problems
  * Risk management
  * Documentation planning
    * Title, names, purpose
    * Procedures for development, review, approval and modification


## Software requirements analysis
* functional requirements, constraints
* inputs and outputs
* interfaces
* warnings and operator messages
* security capabilities, auditing
* UI requirements
* forms, data and databases
* installation and acceptance
* operation and maintenance
* networking
* user maintenance
* regulatory requirements


## SOUP
* Specify functional and performance requirements of SOUP (B,C) to document its intended use
* Specify hardware and software required by SOUP (B,C) to document proper operation

## Security
* General security covered by ISO 27799
* This standard covers security in the context of safety, namely;
  * Lack of availability
  * Lack of integrity
  * Loss of confidentiality

## Usability
* No processes defined by this standard, but must consider usability in the context of safety, eg;
  * Misleading information
  * Incorrect usage in time-critical situations
  * Incorrect data entry

## Risk
* Gather information pertinent to risk (see ISO 14971)
* Assume the probability of an adverse software event is 1 when considering risk (harm x probability)
* Consider the probability of a hazard (p1=1) and the probability of a hazard causing harm (p2)
* See also IEC TR 80002

## Software safety classification
* Determines the rigour of development process required, determined during preliminary risk analysis
* Four steps:
  * Can this contribute to a hazardous situation (considering potential hazards, requirements and intended use)
  * External risk control measures
  * Is there unacceptable residual risk (ie. what is p2)
  * Severity of harm
* Classes
  * C (serious harm and death)
  * B (non serious harm)
  * A (cannot contribute to a hazardous situation, or cannot lead to unacceptable risk with external risk control)
* All software is Class C until proven otherwise
  * Essentially depends on the value of p2, and the severity of harm itself
* Assigned to a software system as a whole
  * A manufacturer may document a rationale for software items and units to have a different classification from the system
  * The highest classification will effectively bubble to the system level unless a risk management process defines a rationale for not doing so

## Legacy software
* May be required for manufacturer to demonstrate compliance for legacy software
* Comprehensive assessment of field data should be collected for legacy software, specifically pertaining to adverse events and anomalies


## Software development process
* Ensure software can meet its intended use, reduce risks
* Can document tasks in a single or multiple plans
* Plans can reference existing company policies and procedures in whole or in part
* The plan can be developed iteratively
* The plan should be updated to reflect current knowledge of the system

### Requirements analysis
* Manufacturer must establish and verify the software requirements
* If the risk management process imposed requirements on the software to control risk, it must be possible to trace the risk control measures to the software requirements
* It should be possible to trace requirements to system testing
* Regulatory conformance is a software requirement
* Software requirements are the combination of customer needs and design inputs
